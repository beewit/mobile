var loadPage;new Vue({el:"#app",data:{nav:{lhref:"/red_packet/pages/user/home.html",title:"发出的红包"},SumPrice:0,SendCount:0,fileHost:null,InfluenceNum:0,Where:"",SumNum:0,UseNum:0,List:{}},mounted:function(){var e=this;wechatSDK.initConfig(["chooseWXPay"],function(){wecatInit=!0}),common.getToken(function(t){t?(e.isLoginAccount=!0,e.List.PageIndex=0,common.scroll("#content",function(t,a){loadPage=t,e.getList(1,a)},function(t,a){loadPage=t,e.getList(e.List.PageIndex+1,a)}),e.getRedPacketAccessLogNum(),e.sendRedPacketSumPrice()):e.isLoginAccount=!1})},methods:{navChange:function(e){this.Where=e,loadPage.unlock(),this.getList(1,null)},paymentTap:function(e){wechatSDK.paymentRedPacket(e,function(e){e&&(layer.msg("支付成功"),location.href="/red_packet/pages/receive/red_packet.html?id="+res.data)})},getRedPacketAccessLogNum:function(){var e=this;common.ajax({errTip:!1,succTip:!1,loadTip:!1,url:config.getRedPacketAccessLogNumUrl,success:function(t){var a="0";a=t.data>=1e4?t.data/1e4+"万":t.data,e.InfluenceNum=a}})},sendRedPacketSumPrice:function(){var e=this;common.ajax({errTip:!1,succTip:!1,loadTip:!1,url:config.sendRedPacketSumPriceUrl,success:function(t){e.SumPrice=t.data}})},getList:function(e,t){var a=this;common.ajax({url:config.getSendRedPacketListUrl,data:{pageIndex:e,t:a.Where},success:function(n){""==a.Where&&(a.SendCount=n.data.Count);for(var c in n.data.Data)n.data.Data[c].money=n.data.Data[c].money.replace(".00","");if(1==e)a.List=n.data;else{a.List.Data.reverse();for(var c in a.List.Data)n.data.Data.push(a.List.Data[c]);n.data.Data.reverse(),a.List=n.data}setTimeout(function(){"function"==typeof t&&t(n)},500)},error:function(){setTimeout(function(){"function"==typeof t&&t(null)},500)}})}}});