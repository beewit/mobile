var wecatInit=!1;window.onload=function(){var e=new datePicker;e.init({trigger:"#expireTime",type:"date",minDate:new Date((new Date).getTime()+864e5).format("yyyy-MM-dd"),maxDate:new Date((new Date).getTime()+15768e7).format("yyyy-MM-dd"),onSubmit:function(){e.value},onClose:function(){}})},new Vue({el:"#app",data:{nav:{back:"false",title:"发红包"},model:{name:null,photo:config.defaultPhoto},photoImage:null,isLoginAccount:!0,expireComponyFunc:!0,Loading:!1},mounted:function(){var e=this;wechatSDK.initConfig(["chooseImage","uploadImage","previewImage"],function(){wecatInit=!0}),common.getToken(function(o){o||(e.isLoginAccount=!1)})},methods:{chooseImage:function(){var e=this;return wecatInit?void wechatSDK.chooseImage(1,function(o){e.model.photo=o.data.path,e.photoImage=o.data.url},function(){layer.msg("上传失败",{icon:0})}):void layer.msg("刷新页面重试")},submit:function(){console.log(this.model);var e=this;common.ajax({url:config.addCouponUrl,data:e.model,success:function(){Cookies.set("sendCouponName",e.model.sendName,{expires:30}),Cookies.set("sendCouponPhoto",e.model.sendPhoto,{expires:30}),location.href=location.href}})}}});