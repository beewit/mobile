var loadPage;new Vue({el:"#app",data:{nav:{lhref:"/red_packet/pages/user/home.html",title:"发出的现金券"},Where:"",SumNum:0,UseNum:0,List:{}},mounted:function(){var t=this;common.getToken(function(a){a?(t.isLoginAccount=!0,t.List.PageIndex=0,common.scroll("#content",function(a,e){loadPage=a,t.getList(1,e)},function(a,e){loadPage=a,t.getList(t.List.PageIndex+1,e)})):t.isLoginAccount=!1})},methods:{navChange:function(t){this.Where=t,loadPage.unlock(),this.getList(1,null)},tapOpenDesc:function(t){Vue.set(this.List.Data[t],"showDesc",!this.List.Data[t].showDesc)},useCouponNum:function(){var t=this;app.request({errTip:!1,succTip:!1,loadTip:!1,url:config.useCouponNumUrl,success:function(a){t.setData({UseNum:a.data})}})},deleteCoupon:function(t,a){var e=this;layer.confirm("是否确定删除现金券？",{title:"温馨提示",icon:0},function(){common.ajax({url:config.deleteCouponUrl,data:{id:t},success:function(){e.List.Data[a].status="已删除"}})})},getList:function(t,a){var e=this;common.ajax({url:config.getCouponListUrl,data:{pageIndex:t,t:e.Where},success:function(n){for(var i in n.data.Data)n.data.Data[i].money=n.data.Data[i].money.replace(".00",""),n.data.Data[i].expire_time?n.data.Data[i].expire_time=n.data.Data[i].expire_time.replace(" 00:00:00",""):n.data.couponMaps[i].expire_time="不限";if(1==t)e.List=n.data;else{e.List.Data.reverse();for(var i in e.List.Data)n.data.Data.push(e.List.Data[i]);n.data.Data.reverse(),e.List=n.data}setTimeout(function(){"function"==typeof a&&a(n)},500)},error:function(){setTimeout(function(){"function"==typeof a&&a(null)},500)}})}}});