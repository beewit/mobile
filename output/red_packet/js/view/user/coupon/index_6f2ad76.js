var loadPage;new Vue({el:"#app",data:{nav:{lhref:"/red_packet/pages/user/home.html",title:"我的现金券"},Where:"",SumNum:0,UseNum:0,List:{PageIndex:0,Data:null}},mounted:function(){var a=this;a.List.PageIndex=0,common.scroll("#content",function(t,e){loadPage=t,a.getList(1,e)},function(t,e){loadPage=t,a.getList(a.List.PageIndex+1,e)}),wechatSDK.initConfig(["previewImage"],function(){})},methods:{useCoupon:function(a){common.ajax({url:config.couponQrCodeUrl,data:{id:a},success:function(a){var t=fileDoMain+a.data;wechatSDK.previewImage(t,[t])}})},navChange:function(a){this.Where=a,loadPage.unlock(),this.getList(1,null)},tapOpenDesc:function(a){Vue.set(this.List.Data[a],"showDesc",!this.List.Data[a].showDesc)},getList:function(a,t){var e=this;common.ajax({url:config.getReceiveCouponListUrl,data:{pageIndex:a,t:e.Where},success:function(n){for(var i in n.data.Data)n.data.Data[i].money=n.data.Data[i].money.replace(".00",""),n.data.Data[i].expire_time?n.data.Data[i].expire_time=n.data.Data[i].expire_time.replace(" 00:00:00",""):n.data.couponMaps[i].expire_time="不限";if(1==a)e.List=n.data;else{e.List.Data.reverse();for(var i in e.List.Data)n.data.Data.push(e.List.Data[i]);n.data.Data.reverse(),e.List=n.data}setTimeout(function(){"function"==typeof t&&t(n)},500)},error:function(){setTimeout(function(){"function"==typeof t&&t(null)},500)}})}}});