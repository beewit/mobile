var wecatInit=!1;window.onload=function(){var e=new datePicker;e.init({trigger:"#expireTime",type:"date",minDate:new Date((new Date).getTime()+864e5).format("yyyy-MM-dd"),maxDate:new Date((new Date).getTime()+15768e7).format("yyyy-MM-dd"),onSubmit:function(){e.value},onClose:function(){}})},new Vue({el:"#app",data:{nav:{back:"false",title:"发红包"},model:{name:null,photo:config.defaultPhoto},photoImage:null,isLoginAccount:!0,expireComponyFunc:!0,Loading:!1},mounted:function(){wechatSDK.initConfig(["chooseImage","uploadImage","previewImage"],function(){wecatInit=!0})},methods:{chooseImage:function(){var e=this;return wecatInit?void wechatSDK.chooseImage(1,function(t){e.model.photo=t.data.path,e.photoImage=t.data.url},function(){layer.msg("上传失败",{icon:0})}):void layer.msg("刷新页面重试")},submit:function(){console.log(this.model);var t=this;common.ajax({url:config.addCouponUrl,data:t.model,success:function(o){localStorage.setItem("sendCouponName",t.model.sendName),localStorage.setItem("sendCouponPhoto",t.model.sendName),wx.setStorageSync("sendRedPacketName",e.detail.value.sendName),wx.setStorageSync("sendRedPacketPhoto",e.detail.value.sendPhoto),app.paymentRedPacket(o.data,function(e){t.setData({Loading:!1}),e&&util.toastErrorWin("红包正在审核中，请耐心等待审核结果！可在“我的->发出的红包”中查看审核结果")}),t.formReset()}})}}});